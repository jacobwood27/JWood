<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/highlight/github.min.css"> <link rel=stylesheet  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/basic.css"> <link rel=icon  href="/assets/favicon.png"> <title>Shuffle</title> <header> <div class=blog-name ><a href="/">Jacob Wood</a></div> <nav> <ul> <li><a href="/projects/">Projects</a> <li><a href="/posts/">Posts</a> <li><a href="/projects/books/">Books</a> <li><a href="/projects/podcasts/">Podcasts</a> <li><a href="/now">Now</a> </ul> <img src="/assets/hamburger.svg" id=menu-icon > </nav> </header> <div class=franklin-content ><p>Folk wisdom claims 7 shuffles is sufficient to thoroughly mix up a deck of cards. This claim originates from a <a href="https://escholarship.org/content/qt0k4654kx/qt0k4654kx.pdf?t&#61;p3z6d7">paper</a> published in 1986 by David Aldous and Persi Diaconis and summarized <a href="https://www.nytimes.com/1990/01/09/science/in-shuffling-cards-7-is-winning-number.html">in the New York Times</a> in 1990. </p> <p>Does my mediocre shuffling reflect this common wisdom? This post is an attempt to investigate that question.</p> <h2 id=collecting_data ><a href="#collecting_data" class=header-anchor >Collecting Data</a></h2> <p>The first step to assessing my shuffling performance is to investigate a few real world shuffles. To start I recorded 5 the results of 5 shuffles by hand to get a sense of the variation in the distribution. Each run involved shuffling the deck with a riffle shuffle but not aligning the left and right hand piles:</p> <div class=im-100 ><img src="/posts/005_shuffle/card_shuffle1.png" alt=""></div> <p>The resulting order was then recorded as a string of 1s &#40;card from left hand&#41; and 2s &#40;card from right hand&#41;. The 5 initial shuffles were:</p> <pre><code class="plaintext hljs">1112212122121212121212121212121212121212121212111221
1222212212212121221212121212121212222112112211221122
2221121212211212112121221211221212121122222112212122
2222122121221121212121122112211222121222211222112211
2221221221122221212112221122121212212211122122121221</code></pre> <p>Eyeballing here shows quite a bit of variation from shuffle to shuffle. I set out to record the results of 100 independent shuffles to start to quantify the distribution.</p> <h3 id=video_recording ><a href="#video_recording" class=header-anchor >Video Recording</a></h3> <p>Initial attempts at data collection all revolved around recording video of cards and processing it to back out the shuffled sequence.</p> <h4 id=shuffling_-_head_on ><a href="#shuffling_-_head_on" class=header-anchor >Shuffling - Head On </a></h4> <p>The most straightforward approach seemed to be recording the cards falling during the shuffling sequence in slow motion &#40;phone camera can capture at 240fps&#41;. A sample of the resulting video looks like:</p> <div class=im-100 ><img src="/posts/005_shuffle/card_shuffle1.png" alt=""></div> <div class=vid-100 ><video controls> <source src="/posts/005_shuffle/front_shuffle.webm" type="video/webm"> </video></div> <p>Even at 240fps we miss some of the faster cards in transit. We can address this by instead capturing the shuffle pile as it changes.</p> <h3 id=shuffling_-_angled_down ><a href="#shuffling_-_angled_down" class=header-anchor >Shuffling - Angled Down</a></h3> <h2 id=building_a_model ><a href="#building_a_model" class=header-anchor >Building a Model</a></h2> <h2 id=investigating_performance ><a href="#investigating_performance" class=header-anchor >Investigating Performance</a></h2> <div class=page-foot > <div class=copyright > <a href="mailto:mail@jacobw.xyz" class="fa fa-envelope"></a> <a href="https://github.com/jacobwood27" class="fa fa-github"></a> <br> <br> Last modified: January 04, 2022. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div>